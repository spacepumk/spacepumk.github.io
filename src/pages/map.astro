---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE } from '../consts';
---

<!doctype html>
<html lang="en">
<head>
  <BaseHead title={`Map | ${SITE_TITLE}`} description="Concert venues I've shot across Europe" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <Header />
  <main>
    <h1>Venue Map</h1>
    <p class="intro">Every venue I've shot across the globe. Click a pin to see the shows.</p>
    
    <div id="map"></div>
  </main>
  <Footer />

  <style>
    main {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2em 1em;
    }

    h1 {
      text-align: center;
      margin-bottom: 0.5em;
    }

    .intro {
      text-align: center;
      color: #999;
      margin-bottom: 2em;
    }

    #map {
      width: 100%;
      height: 600px;
      border: 1px solid #222;
      border-radius: 8px;
    }

    :global(.leaflet-popup-content-wrapper) {
      background: #0a0a0a;
      color: #fff;
      border: 1px solid #333;
    }

    :global(.leaflet-popup-tip) {
      background: #0a0a0a;
      border: 1px solid #333;
    }

    :global(.venue-popup h3) {
      margin: 0 0 0.5em 0;
      color: #ff3c3c;
    }

    :global(.venue-popup ul) {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    :global(.venue-popup li) {
      margin: 0.5em 0;
    }

    :global(.venue-popup a) {
      color: #ccc;
      text-decoration: none;
    }

    :global(.venue-popup a:hover) {
      color: #ff3c3c;
      text-decoration: underline;
    }
  </style>

  <script is:inline src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script is:inline>
    // Initialize map centered on Europe
    const map = L.map('map').setView([48.8566, 2.3522], 5);

    // Add dark tile layer
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
      maxZoom: 19
    }).addTo(map);

    // Venue data - ADD YOUR VENUES HERE
    // Venue data
const venues = [
  {
    name: 'Accor Arena',
    city: 'Paris, France',
    lat: 48.8396,
    lng: 2.3797,
    shows: [
      { title: 'Deftones', date: 'Nov 2024', link: '/blog/test-post' }
    ]
  },
  {
    name: 'Parkorman',
    city: 'Istanbul, Turkey',
    lat: 41.1086,
    lng: 29.0369,
    shows: [
      { title: 'Jakuzi', date: 'Aug 2024', link: '/blog/test-post' },
      { title: 'GSUFEST 2024', date: 'Jul 2024', link: '/blog/test-post' }
    ]
  }
];

    // Custom red marker icon
    const redIcon = L.icon({
      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
      shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
      shadowSize: [41, 41]
    });

    // Add markers
    venues.forEach(venue => {
      const showList = venue.shows.map(show => 
        `<li><a href="${show.link}">${show.title}</a> <span style="color: #666;">(${show.date})</span></li>`
      ).join('');

      const popupContent = `
        <div class="venue-popup">
          <h3>${venue.name}</h3>
          <p style="color: #999; margin: 0 0 0.5em 0;">${venue.city}</p>
          <ul>${showList}</ul>
        </div>
      `;

      L.marker([venue.lat, venue.lng], { icon: redIcon })
        .addTo(map)
        .bindPopup(popupContent);
    });
  </script>
</body>
</html>
